# Maintainer: James Temple <james@honey-badger.org>
pkgname=time-warp-ide
pkgver=1.0.0
pkgrel=1
pkgdesc="Educational multi-language programming environment (BASIC, PILOT, Logo, Pascal, Prolog)"
arch=('x86_64' 'aarch64')
url="https://github.com/James-HoneyBadger/Time_Warp_Studio"
license=('MIT')
depends=('python' 'python-pyside6' 'python-pillow' 'python-requests')
makedepends=('python-installer' 'python-build' 'python-wheel' 'python-setuptools')
source=("git+https://github.com/James-HoneyBadger/Time_Warp_Studio.git")
sha256sums=('SKIP')

build() {
    cd "$srcdir/Time_Warp_Studio/Platforms/Python"
    python -m build --wheel --no-isolation
}

package() {
    cd "$srcdir/Time_Warp_Studio/Platforms/Python"
    python -m installer --destdir="$pkgdir" dist/*.whl
    
    # Install desktop file and icon
    install -Dm644 "$srcdir/Time_Warp_Studio/packaging/linux/time-warp-ide.desktop" "$pkgdir/usr/share/applications/time-warp-ide.desktop"
    install -Dm644 "$srcdir/Time_Warp_Studio/packaging/linux/icon.png" "$pkgdir/usr/share/icons/hicolor/256x256/apps/time-warp-ide.png"
}
